{"remainingRequest":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\src\\views\\course_update\\educourse_update.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\src\\views\\course_update\\educourse_update.vue","mtime":1646101920000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\babel.config.js","mtime":1646101920000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvODYxOTMvRGVza3RvcC9vbmxpbmUtZWR1LXRlYWNoZXItbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIGZyb20gIkM6L1VzZXJzLzg2MTkzL0Rlc2t0b3Avb25saW5lLWVkdS10ZWFjaGVyLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW50ZXJvcFJlcXVpcmVXaWxkY2FyZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEluZm8sIHVwZGF0ZUl0LCB1cGRhdGVDViBhcyBfdXBkYXRlQ1YgfSBmcm9tICdAL2FwaS9jb3Vyc2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0VkdWNvdXJzZVVwZGF0ZScsCiAgY29tcG9uZW50czogewogICAgJ3YtY3JlYXRlLWluZm8nOiBmdW5jdGlvbiB2Q3JlYXRlSW5mbygpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCdAL3ZpZXdzL2NvdXJzZV91cGRhdGUvY3JlYXRlX2luZm8nKSk7CiAgICAgIH0pOwogICAgfSwKICAgICd2LWNyZWF0ZS1zdWJqZWN0LWFuZC11cGxvYWQnOiBmdW5jdGlvbiB2Q3JlYXRlU3ViamVjdEFuZFVwbG9hZCgpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCdAL3ZpZXdzL2NvdXJzZV91cGRhdGUvY3JlYXRlX3N1YmplY3RfYW5kX3VwbG9hZCcpKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RlcEFjdGl2ZTogMSwKICAgICAgY291cnNlRGF0YToge30sCiAgICAgIHVwZGF0ZUNvdXJzZURhdGE6IHt9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdXBkYXRlQ1ZEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc3VibWl0Q291cnNlRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHdhcm5pbmdEaWFsb2dWaXNpYmxlOiBmYWxzZSAvLyDor77nqIvlpITkuo7lrqHmoLjnirbmgIHvvIzpmLLmraLkv67mlLnorablkYrmoYYKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUodG8sIGZyb20pIHsKICAgICAgdGhpcy5nZXRDb3Vyc2VJbmZvKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDb3Vyc2VJbmZvKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bor6XorrLluIjlnKjojYnnqL/nrrHnmoTor77nqIvvvIzlpoLmnpzmnInvvIznm7TmjqXov5vlhaXnrKzkuozmraUKICAgIGdldENvdXJzZUluZm86IGZ1bmN0aW9uIGdldENvdXJzZUluZm8oaWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgZ2V0SW5mbyhpZCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzLmNvdXJzZURhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCByZXNwLmRhdGEpOwogICAgICAgIGlmIChfdGhpcy5jb3Vyc2VEYXRhLnN0YXR1cy5pbmRleE9mKCdBVURJVElORycpICE9PSAtMSkgewogICAgICAgICAgX3RoaXMud2FybmluZ0RpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMuJHJlZnMuQ3JlYXRlSW5mby5zZXREYXRhKHRoaXMuY291cnNlRGF0YSk7CiAgICAgICAgfS5iaW5kKF90aGlzKSwgMTAwKTsKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBpZiAodGhpcy4kcmVmcy5DcmVhdGVJbmZvKSB7CiAgICAgICAgdGhpcy51cGRhdGVDb3Vyc2VEYXRhID0gdGhpcy4kcmVmcy5DcmVhdGVJbmZvLmdldERhdGEoKTsKICAgICAgfQogICAgICB1cGRhdGVJdCh0aGlzLnVwZGF0ZUNvdXJzZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpczIuc3VibWl0Q291cnNlRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJlc3AubWVzc2FnZSk7CiAgICAgICAgX3RoaXMyLnN0ZXBBY3RpdmUgPSAzOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVDVjogZnVuY3Rpb24gdXBkYXRlQ1YoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnVwZGF0ZUNvdXJzZURhdGEgPSB0aGlzLiRyZWZzLkNyZWF0ZUluZm8uZ2V0RGF0YSgpOwogICAgICBfdXBkYXRlQ1YodGhpcy5jb3Vyc2VEYXRhLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXMzLnVwZGF0ZUNWRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKCfmlbDmja7lh4blpIflrozmiJAnKTsKICAgICAgICBfdGhpczMuc3RlcEFjdGl2ZSA9IDI7CiAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getInfo","updateIt","updateCV","name","components","vCreateInfo","Promise","resolve","then","_interopRequireWildcard","require","vCreateSubjectAndUpload","data","stepActive","courseData","updateCourseData","loading","updateCVDialogVisible","submitCourseDialogVisible","warningDialogVisible","watch","$route","to","from","getCourseInfo","params","id","created","methods","_this","resp","_objectSpread","status","indexOf","setTimeout","$refs","CreateInfo","setData","bind","submit","_this2","getData","$message","success","message","_this3"],"sources":["src/views/course_update/educourse_update.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div style=\"font-size: 24px;text-align: center;margin-bottom:36px; \">\n      <div v-if=\"stepActive===1\">更新课程信息</div>\n      <div v-else-if=\"stepActive===2\">更新章节与视频信息</div>\n      <div v-else-if=\"stepActive===3\">审核中</div>\n    </div>\n    <div class=\"step-container\">\n      <div v-if=\"stepActive===1\">\n        <v-create-info ref=\"CreateInfo\" />\n        <div class=\"step-ctrl\">\n          <el-button type=\"primary\" style=\"margin-right: 24px\" @click=\"submitCourseDialogVisible=true\">\n            提 交 审 核\n          </el-button>\n          <el-button class=\"btn\" type=\"primary\" @click=\"updateCVDialogVisible=true\">\n            继续更新章节与视频信息\n          </el-button>\n        </div>\n      </div>\n      <div v-else-if=\"stepActive===2\" v-loading=\"loading\">\n        <v-create-subject-and-upload ref=\"createSubjectAndUpload\" :course=\"courseData\" />\n        <div class=\"step-ctrl\">\n          <el-button class=\"btn\" type=\"primary\" @click=\"submitCourseDialogVisible=true\">提 交 审 核</el-button>\n        </div>\n      </div>\n      <div v-else-if=\"stepActive===3\">\n        <div style=\"font-size: 20px;margin: 16vh 0 10vh 0;text-align: center\">\n          课程《{{ courseData.title }}》已提交管理员审核\n        </div>\n        <router-link :to=\"{name:'CourseList'}\" class=\"step-ctrl\">\n          <el-button class=\"btn\" type=\"primary\">返回课程列表</el-button>\n        </router-link>\n      </div>\n    </div>\n    <div>\n      <el-dialog\n        title=\"提示\"\n        :visible.sync=\"submitCourseDialogVisible\"\n        destroy-on-close\n        width=\"30vw\"\n      >\n        <div style=\"line-height: 24px\">\n          请确认章节与视频信息是否准确，提交后需要管理员审核后才能再次修改。\n        </div>\n        <span slot=\"footer\">\n          <el-button type=\"primary\" size=\"small\" @click=\"submit\">确 认</el-button>\n          <el-button size=\"small\" @click=\"submitCourseDialogVisible = false\">取 消</el-button>\n        </span>\n      </el-dialog>\n      <el-dialog\n        title=\"提示\"\n        :visible.sync=\"updateCVDialogVisible\"\n        destroy-on-close\n        width=\"30vw\"\n      >\n        <div style=\"line-height: 24px\">\n          是否继续更新课程章节与视频信息？继续修改不会影响到您已经发布课程，审核通过后才会更新。\n        </div>\n        <span slot=\"footer\">\n          <el-button type=\"primary\" size=\"small\" @click=\"updateCV\">确 认</el-button>\n          <el-button size=\"small\" @click=\"updateCVDialogVisible = false\">取 消</el-button>\n        </span>\n      </el-dialog>\n      <el-dialog\n        title=\"警告\"\n        :visible.sync=\"warningDialogVisible\"\n        destroy-on-close\n        width=\"30vw\"\n        @closed=\"$router.push({name:'CourseList'})\"\n      >\n        <div style=\"font-size: 16px;line-height: 32px\">\n          <div>课程《{{ courseData.title }}》正在<span style=\"color: #21BA45\">审核中</span></div>\n          <div style=\"color: #F44336\">请不要尝试修改</div>\n        </div>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport { getInfo, updateIt, updateCV } from '@/api/course'\n\nexport default {\n  name: 'EducourseUpdate',\n  components: {\n    'v-create-info': () => import('@/views/course_update/create_info'),\n    'v-create-subject-and-upload': () => import('@/views/course_update/create_subject_and_upload')\n  },\n  data() {\n    return {\n      stepActive: 1,\n      courseData: {},\n      updateCourseData: {},\n      loading: false,\n      updateCVDialogVisible: false,\n      submitCourseDialogVisible: false,\n      warningDialogVisible: false // 课程处于审核状态，防止修改警告框\n    }\n  },\n  watch: {\n    $route(to, from) {\n      this.getCourseInfo(this.$route.params.id)\n    }\n  },\n  created() {\n    this.getCourseInfo(this.$route.params.id)\n  },\n  methods: {\n    // 获取该讲师在草稿箱的课程，如果有，直接进入第二步\n    getCourseInfo(id) {\n      getInfo(id).then(resp => {\n        this.courseData = { ...resp.data }\n        if (this.courseData.status.indexOf('AUDITING') !== -1) {\n          this.warningDialogVisible = true\n        }\n        setTimeout(function() {\n          this.$refs.CreateInfo.setData(this.courseData)\n        }.bind(this), 100)\n      })\n    },\n    submit() {\n      if (this.$refs.CreateInfo) {\n        this.updateCourseData = this.$refs.CreateInfo.getData()\n      }\n      updateIt(this.updateCourseData).then(resp => {\n        this.submitCourseDialogVisible = false\n        this.$message.success(resp.message)\n        this.stepActive = 3\n      })\n    },\n    updateCV() {\n      this.loading = true\n      this.updateCourseData = this.$refs.CreateInfo.getData()\n      updateCV(this.courseData.id).then(resp => {\n        this.updateCVDialogVisible = false\n        this.$message.success('数据准备完成')\n        this.stepActive = 2\n        this.loading = false\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.step-container {\n  margin-top: 30px;\n  display: flex;\n  justify-content: center;\n\n  > div {\n    width: 70%;\n  }\n\n  .step-ctrl {\n    margin-top: 64px;\n    text-align: center;\n    display: block;\n\n    .btn {\n      width: 300px;\n    }\n  }\n}\n\n</style>\n\n<style lang=\"scss\">\n\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA,SAAAA,OAAA,EAAAC,QAAA,EAAAC,QAAA,IAAAA,SAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACA,0BAAAC,YAAA;MAAA,OAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA;QAAA,OAAAC,uBAAA,CAAAC,OAAA;MAAA;IAAA;IACA,wCAAAC,wBAAA;MAAA,OAAAL,OAAA,CAAAC,OAAA,GAAAC,IAAA;QAAA,OAAAC,uBAAA,CAAAC,OAAA;MAAA;IAAA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;MACAC,UAAA;MACAC,gBAAA;MACAC,OAAA;MACAC,qBAAA;MACAC,yBAAA;MACAC,oBAAA;IACA;EACA;EACAC,KAAA;IACAC,MAAA,WAAAA,OAAAC,EAAA,EAAAC,IAAA;MACA,KAAAC,aAAA,MAAAH,MAAA,CAAAI,MAAA,CAAAC,EAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAH,aAAA,MAAAH,MAAA,CAAAI,MAAA,CAAAC,EAAA;EACA;EACAE,OAAA;IACA;IACAJ,aAAA,WAAAA,cAAAE,EAAA;MAAA,IAAAG,KAAA;MACA7B,OAAA,CAAA0B,EAAA,EAAAlB,IAAA,WAAAsB,IAAA;QACAD,KAAA,CAAAf,UAAA,GAAAiB,aAAA,KAAAD,IAAA,CAAAlB,IAAA;QACA,IAAAiB,KAAA,CAAAf,UAAA,CAAAkB,MAAA,CAAAC,OAAA;UACAJ,KAAA,CAAAV,oBAAA;QACA;QACAe,UAAA;UACA,KAAAC,KAAA,CAAAC,UAAA,CAAAC,OAAA,MAAAvB,UAAA;QACA,EAAAwB,IAAA,CAAAT,KAAA;MACA;IACA;IACAU,MAAA,WAAAA,OAAA;MAAA,IAAAC,MAAA;MACA,SAAAL,KAAA,CAAAC,UAAA;QACA,KAAArB,gBAAA,QAAAoB,KAAA,CAAAC,UAAA,CAAAK,OAAA;MACA;MACAxC,QAAA,MAAAc,gBAAA,EAAAP,IAAA,WAAAsB,IAAA;QACAU,MAAA,CAAAtB,yBAAA;QACAsB,MAAA,CAAAE,QAAA,CAAAC,OAAA,CAAAb,IAAA,CAAAc,OAAA;QACAJ,MAAA,CAAA3B,UAAA;MACA;IACA;IACAX,QAAA,WAAAA,SAAA;MAAA,IAAA2C,MAAA;MACA,KAAA7B,OAAA;MACA,KAAAD,gBAAA,QAAAoB,KAAA,CAAAC,UAAA,CAAAK,OAAA;MACAvC,SAAA,MAAAY,UAAA,CAAAY,EAAA,EAAAlB,IAAA,WAAAsB,IAAA;QACAe,MAAA,CAAA5B,qBAAA;QACA4B,MAAA,CAAAH,QAAA,CAAAC,OAAA;QACAE,MAAA,CAAAhC,UAAA;QACAgC,MAAA,CAAA7B,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}