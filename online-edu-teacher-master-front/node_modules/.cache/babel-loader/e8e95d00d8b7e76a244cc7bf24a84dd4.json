{"remainingRequest":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\src\\views\\course_update\\create_subject_and_upload.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\src\\views\\course_update\\create_subject_and_upload.vue","mtime":1646101920000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\babel.config.js","mtime":1646101920000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86193\\Desktop\\online-edu-teacher-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvODYxOTMvRGVza3RvcC9vbmxpbmUtZWR1LXRlYWNoZXItbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzLzg2MTkzL0Rlc2t0b3Avb25saW5lLWVkdS10ZWFjaGVyLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCBmcm9tICJDOi9Vc2Vycy84NjE5My9EZXNrdG9wL29ubGluZS1lZHUtdGVhY2hlci1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2ludGVyb3BSZXF1aXJlV2lsZGNhcmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBsaXN0IGFzIGxpc3RDaGFwdGVyLCBjcmVhdGVJdCBhcyBfY3JlYXRlQ2hhcHRlciwgdXBkYXRlSXQgYXMgX3VwZGF0ZUNoYXB0ZXIsIGRlbGV0ZUl0IGFzIF9kZWxldGVDaGFwdGVyIH0gZnJvbSAnQC9hcGkvY2hhcHRlcl90bXAnOwppbXBvcnQgeyBsaXN0IGFzIGxpc3RWaWRlbywgdXBkYXRlSXQgYXMgX3VwZGF0ZVZpZGVvLCBkZWxldGVJdCBhcyBfZGVsZXRlVmlkZW8gfSBmcm9tICdAL2FwaS92aWRlb190bXAnOwppbXBvcnQgeyBieXRlc1RvU2l6ZSBhcyBfYnl0ZXNUb1NpemUgfSBmcm9tICdAL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDcmVhdGVTdWJqZWN0QW5kVXBsb2FkJywKICBjb21wb25lbnRzOiB7CiAgICAndi11cGxvYWQtdmlkZW8nOiBmdW5jdGlvbiB2VXBsb2FkVmlkZW8oKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgnQC92aWV3cy9jb3Vyc2VfdXBkYXRlL3VwbG9hZCcpKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdnVlL3JlcXVpcmUtcHJvcC10eXBlcwogIHByb3BzOiBbJ2NvdXJzZSddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFwdGVyczogW10sCiAgICAgIC8vIOeroOiKgmlk5LiO6KeG6aKR5YiX6KGo5pig5bCEPGNoYXB0ZXJJZCxbLi4udmlkZW9zXT4KICAgICAgY2hhcHRlcklkVmlkZW9NYXA6IHt9LAogICAgICBhZGRPclVwZGF0ZUNoYXB0ZXI6IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgc29ydDogMAogICAgICB9LAogICAgICB1cGRhdGVWaWRlb0RhdGE6IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgc29ydDogMCwKICAgICAgICBmcmVlOiBmYWxzZQogICAgICB9LAogICAgICAvLyDlr7nor53moYYKICAgICAgYWRkQ2hhcHRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICB1cGRhdGVDaGFwdGVyRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRlbGV0ZUNoYXB0ZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdGFibGVSZWZyZXNoSW5kZXg6IDAsCiAgICAgIC8vIOS4iuS8oOinhumikQogICAgICB1cGxvYWRWaWRlb0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICB1cGxvYWRWaWRlb0RpYWxvZ1RpdGxlOiAnJywKICAgICAgLy8g5pu05paw6KeG6aKRCiAgICAgIHVwZGF0ZVZpZGVvRGlhbG9nVmlzaWJsZTogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDaGFwdGVyTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5a2X6IqC6L2s5o2iCiAgICBieXRlc1RvU2l6ZTogZnVuY3Rpb24gYnl0ZXNUb1NpemUoYnl0ZXMpIHsKICAgICAgcmV0dXJuIF9ieXRlc1RvU2l6ZShieXRlcyk7CiAgICB9LAogICAgZ2V0Q2hhcHRlckxpc3Q6IGZ1bmN0aW9uIGdldENoYXB0ZXJMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBsaXN0Q2hhcHRlcih0aGlzLmNvdXJzZS5pZCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzLmNoYXB0ZXJzID0gW107CiAgICAgICAgX3RoaXMuY2hhcHRlcnMgPSByZXNwLmRhdGE7CiAgICAgICAgLy8g5Yid5aeL5YyW6KeG6aKR5YiX6KGo56m65pWw5o2uCiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlc3AuZGF0YSksCiAgICAgICAgICBfc3RlcDsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGMgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgX3RoaXMuY2hhcHRlcklkVmlkZW9NYXBbYy5pZF0gPSBbXTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvcGVuQWRkQ2hhcHRlckRpYWxvZzogZnVuY3Rpb24gb3BlbkFkZENoYXB0ZXJEaWFsb2coKSB7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyID0gewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBzb3J0OiAwCiAgICAgIH07CiAgICAgIHRoaXMuYWRkQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIG9wZW5VcGRhdGVDaGFwdGVyRGlhbG9nOiBmdW5jdGlvbiBvcGVuVXBkYXRlQ2hhcHRlckRpYWxvZyhjdXJEYXRhKSB7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyID0gX29iamVjdFNwcmVhZCh7fSwgY3VyRGF0YSk7CiAgICAgIHRoaXMudXBkYXRlQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIG9wZW5EZWxldGVDaGFwdGVyRGlhbG9nOiBmdW5jdGlvbiBvcGVuRGVsZXRlQ2hhcHRlckRpYWxvZyhjdXJEYXRhKSB7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyID0gX29iamVjdFNwcmVhZCh7fSwgY3VyRGF0YSk7CiAgICAgIHRoaXMuZGVsZXRlQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIG9wZW5VcGxvYWRWaWRlb0RpYWxvZzogZnVuY3Rpb24gb3BlblVwbG9hZFZpZGVvRGlhbG9nKGN1ckRhdGEpIHsKICAgICAgdGhpcy51cGxvYWRWaWRlb0RpYWxvZ1RpdGxlID0gIlx1NEUwQVx1NEYyMFx1ODlDNlx1OTg5MVx1ODFGM1x1N0FFMFx1ODI4MlsiLmNvbmNhdChjdXJEYXRhLnRpdGxlLCAiXSIpOwogICAgICB0aGlzLnVwbG9hZFZpZGVvRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGNvdXJzZUlkOiB0aGlzLmNvdXJzZS5pZCwKICAgICAgICBjaGFwdGVySWQ6IGN1ckRhdGEuaWQKICAgICAgfTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy4kcmVmcy5VcGxvYWRWaWRlby5zZXREYXRhKGRhdGEpOwogICAgICB9LmJpbmQodGhpcyksIDEwMCk7CiAgICB9LAogICAgb3BlblVwZGF0ZVZpZGVvRGlhbG9nVmlzaWJsZTogZnVuY3Rpb24gb3BlblVwZGF0ZVZpZGVvRGlhbG9nVmlzaWJsZShjdXJEYXRhKSB7CiAgICAgIHRoaXMudXBkYXRlVmlkZW9EaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy51cGRhdGVWaWRlb0RhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBjdXJEYXRhKTsKICAgIH0sCiAgICAvLyDmlrDlu7rnq6DoioIKICAgIGNyZWF0ZUNoYXB0ZXI6IGZ1bmN0aW9uIGNyZWF0ZUNoYXB0ZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLmFkZE9yVXBkYXRlQ2hhcHRlci5jb3Vyc2VJZCA9IHRoaXMuY291cnNlLmlkOwogICAgICBfY3JlYXRlQ2hhcHRlcih0aGlzLmFkZE9yVXBkYXRlQ2hhcHRlcikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJlc3AubWVzc2FnZSk7CiAgICAgICAgX3RoaXMyLmdldENoYXB0ZXJMaXN0KCk7CiAgICAgICAgX3RoaXMyLmFkZENoYXB0ZXJEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS/ruaUueeroOiKggogICAgdXBkYXRlQ2hhcHRlcjogZnVuY3Rpb24gdXBkYXRlQ2hhcHRlcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyLmNvdXJzZUlkID0gdGhpcy5jb3Vyc2UuaWQ7CiAgICAgIF91cGRhdGVDaGFwdGVyKHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcC5tZXNzYWdlKTsKICAgICAgICBfdGhpczMuZ2V0Q2hhcHRlckxpc3QoKTsKICAgICAgICBfdGhpczMudXBkYXRlQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yig6Zmk56ug6IqCCiAgICBkZWxldGVDaGFwdGVyOiBmdW5jdGlvbiBkZWxldGVDaGFwdGVyKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgX2RlbGV0ZUNoYXB0ZXIodGhpcy5hZGRPclVwZGF0ZUNoYXB0ZXIuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwLm1lc3NhZ2UpOwogICAgICAgIF90aGlzNC5nZXRDaGFwdGVyTGlzdCgpOwogICAgICAgIF90aGlzNC5kZWxldGVDaGFwdGVyRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnq6DoioLliIfmjaIKICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKGlkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICAvLyDojrflj5bnq6DoioLop4bpopHkv6Hmga8KICAgICAgaWYgKGlkKSB7CiAgICAgICAgbGlzdFZpZGVvKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBfdGhpczUuY2hhcHRlcklkVmlkZW9NYXBbaWRdID0gcmVzcC5kYXRhOwogICAgICAgICAgKytfdGhpczUudGFibGVSZWZyZXNoSW5kZXg7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDkuIrkvKDlr7nor53moYblhbPpl63ml7bmm7TmlrDkv6Hmga8KICAgIHVwbG9hZERpYWxvZ0JlZm9yZUNsb3NlOiBmdW5jdGlvbiB1cGxvYWREaWFsb2dCZWZvcmVDbG9zZShkb25lKSB7CiAgICAgIHRoaXMuY2hhbmdlKHRoaXMuJHJlZnMuVXBsb2FkVmlkZW8uZGF0YS5jaGFwdGVySWQpOwogICAgICBkb25lKCk7CiAgICB9LAogICAgLy8g5Yig6Zmk6KeG6aKRCiAgICBkZWxldGVWaWRlbzogZnVuY3Rpb24gZGVsZXRlVmlkZW8oY3VyRGF0YSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgX2RlbGV0ZVZpZGVvKGN1ckRhdGEuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpczYuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwLm1lc3NhZ2UpOwogICAgICAgIF90aGlzNi5jaGFuZ2UoY3VyRGF0YS5jaGFwdGVySWQpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmm7TmlrDop4bpopEKICAgIHVwZGF0ZVZpZGVvOiBmdW5jdGlvbiB1cGRhdGVWaWRlbygpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIF91cGRhdGVWaWRlbyh0aGlzLnVwZGF0ZVZpZGVvRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzNy4kbWVzc2FnZS5zdWNjZXNzKHJlc3AubWVzc2FnZSk7CiAgICAgICAgX3RoaXM3LmNoYW5nZShfdGhpczcudXBkYXRlVmlkZW9EYXRhLmNoYXB0ZXJJZCk7CiAgICAgICAgX3RoaXM3LnVwZGF0ZVZpZGVvRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["list","listChapter","createIt","createChapter","updateIt","updateChapter","deleteIt","deleteChapter","listVideo","updateVideo","deleteVideo","bytesToSize","name","components","vUploadVideo","Promise","resolve","then","_interopRequireWildcard","require","props","data","chapters","chapterIdVideoMap","addOrUpdateChapter","title","sort","updateVideoData","free","addChapterDialogVisible","updateChapterDialogVisible","deleteChapterDialogVisible","tableRefreshIndex","uploadVideoDialogVisible","uploadVideoDialogTitle","updateVideoDialogVisible","created","getChapterList","methods","bytes","_this","course","id","resp","_iterator","_createForOfIteratorHelper","_step","s","n","done","c","value","err","e","f","openAddChapterDialog","openUpdateChapterDialog","curData","_objectSpread","openDeleteChapterDialog","openUploadVideoDialog","concat","courseId","chapterId","setTimeout","$refs","UploadVideo","setData","bind","openUpdateVideoDialogVisible","_this2","$message","success","message","_this3","_this4","change","_this5","uploadDialogBeforeClose","_this6","_this7"],"sources":["src/views/course_update/create_subject_and_upload.vue"],"sourcesContent":["<!-- 步骤2 ： 创建章节并上传视频 -->\n<template>\n  <div>\n    <div style=\"margin-bottom: 20px\">\n      <el-button type=\"primary\" size=\"small\" @click=\"openAddChapterDialog\">新建章节</el-button>\n      <div style=\"float: right;height: 32px;line-height: 32px\">\n        <i class=\"el-icon-loading\" />\n        正在更新课程《{{ course.title }}》\n      </div>\n    </div>\n    <el-collapse :accordion=\"true\" @change=\"change\">\n      <el-collapse-item v-for=\"c of chapters\" :key=\"c.id\" :name=\"c.id\" class=\"chapter-head\">\n        <template slot=\"title\">\n          <div class=\"sort\">{{ c.sort }}</div>\n          <div class=\"title\">{{ c.title }}</div>\n          <div class=\"ctrl\">\n            <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-upload\" @click.stop=\"openUploadVideoDialog(c)\">视频\n            </el-button>\n            <el-button size=\"mini\" type=\"success\" @click.stop=\"openUpdateChapterDialog(c)\">修改</el-button>\n            <el-button size=\"mini\" type=\"danger\" @click.stop=\"openDeleteChapterDialog(c)\">删除</el-button>\n          </div>\n        </template>\n        <el-table\n          :key=\"tableRefreshIndex\"\n          :data=\"chapterIdVideoMap[c.id]\"\n          tooltip-effect=\"dark\"\n          :header-cell-style=\"{fontWeight:'normal', color:'#666'}\"\n          style=\"font-size: 13px\"\n        >\n          <el-table-column type=\"index\" />\n          <el-table-column prop=\"title\" label=\"名称\" show-tooltip-when-overflow />\n          <el-table-column prop=\"duration\" label=\"时长\" width=\"100\" />\n          <el-table-column prop=\"size\" label=\"大小\" width=\"120\">\n            <template slot-scope=\"scope\">{{ bytesToSize(scope.row.size) }}</template>\n          </el-table-column>\n          <el-table-column prop=\"sort\" label=\"排序\" width=\"80\" align=\"center\" />\n          <el-table-column prop=\"sort\" label=\"免费收看\" width=\"100\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span v-if=\"scope.row.free\" style=\"color: #21BA45\">是</span>\n              <span v-else>否</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"150\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" size=\"mini\" @click=\"openUpdateVideoDialogVisible(scope.row)\">修改</el-button>\n              <el-popconfirm\n                style=\"margin-left: 10px\"\n                placement=\"top-end\"\n                confirm-button-text=\"确定\"\n                cancel-button-text=\"取消\"\n                icon=\"el-icon-info\"\n                icon-color=\"red\"\n                :title=\"`你要永久删除视频[${scope.row.title}]吗？`\"\n                @confirm=\"deleteVideo(scope.row)\"\n              >\n                <el-button slot=\"reference\" type=\"danger\" size=\"mini\">删除</el-button>\n              </el-popconfirm>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-collapse-item>\n    </el-collapse>\n    <!-- 新建章节 -->\n    <el-dialog\n      title=\"新建章节\"\n      :visible.sync=\"addChapterDialogVisible\"\n      destroy-on-close\n      width=\"30vw\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form :model=\"addOrUpdateChapter\" size=\"small\" label-width=\"100px\">\n        <el-form-item label=\"章节名称：\">\n          <el-input v-model=\"addOrUpdateChapter.title\" />\n        </el-form-item>\n        <el-form-item label=\"排　　序：\">\n          <el-input-number v-model=\"addOrUpdateChapter.sort\" style=\"width: 100%\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\">\n        <el-button type=\"primary\" size=\"small\" @click=\"createChapter\">确 认</el-button>\n        <el-button size=\"small\" @click=\"addChapterDialogVisible = false\">取 消</el-button>\n      </span>\n    </el-dialog>\n    <!-- 修改章节信息 -->\n    <el-dialog\n      title=\"修改章节信息\"\n      :visible.sync=\"updateChapterDialogVisible\"\n      destroy-on-close\n      width=\"30vw\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form :model=\"addOrUpdateChapter\" size=\"small\" label-width=\"100px\">\n        <el-form-item label=\"章节名称：\">\n          <el-input v-model=\"addOrUpdateChapter.title\" />\n        </el-form-item>\n        <el-form-item label=\"排　　序：\">\n          <el-input-number v-model=\"addOrUpdateChapter.sort\" style=\"width: 100%\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\">\n        <el-button type=\"primary\" size=\"small\" @click=\"updateChapter\">确 认</el-button>\n        <el-button size=\"small\" @click=\"updateChapterDialogVisible=false\">取 消</el-button>\n      </span>\n    </el-dialog>\n    <!-- 删除章节 -->\n    <el-dialog\n      title=\"删除章节\"\n      :visible.sync=\"deleteChapterDialogVisible\"\n      destroy-on-close\n      width=\"30vw\"\n    >\n      <div style=\"color: red\">该操作将会连带删除章节下的所有视频</div>\n      <span slot=\"footer\">\n        <el-button type=\"primary\" size=\"small\" @click=\"deleteChapter\">确 认</el-button>\n        <el-button size=\"small\" @click=\"deleteChapterDialogVisible=false\">取 消</el-button>\n      </span>\n    </el-dialog>\n    <!-- 上传视频 -->\n    <el-dialog\n      :title.sync=\"uploadVideoDialogTitle\"\n      :visible.sync=\"uploadVideoDialogVisible\"\n      destroy-on-close\n      width=\"30vw\"\n      :close-on-click-modal=\"false\"\n      :before-close=\"uploadDialogBeforeClose\"\n    >\n      <v-upload-video ref=\"UploadVideo\" />\n    </el-dialog>\n    <!-- 修改视频信息 -->\n    <el-dialog\n      title=\"修改视频信息\"\n      :visible.sync=\"updateVideoDialogVisible\"\n      destroy-on-close\n      width=\"30vw\"\n    >\n      <el-form :model=\"updateVideoData\" size=\"small\" label-width=\"100px\">\n        <el-form-item label=\"视频名称：\">\n          <el-input v-model=\"updateVideoData.title\" />\n        </el-form-item>\n        <el-form-item label=\"排序：\">\n          <el-input-number v-model=\"updateVideoData.sort\" style=\"width: 100%\" />\n        </el-form-item>\n        <el-form-item label=\"免费观看：\">\n          <el-radio-group v-model=\"updateVideoData.free\">\n            <el-radio :label=\"true\">是</el-radio>\n            <el-radio :label=\"false\">否</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\">\n        <el-button type=\"primary\" size=\"small\" @click=\"updateVideo\">确 认</el-button>\n        <el-button size=\"small\" @click=\"updateVideoDialogVisible=false\">取 消</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  list as listChapter,\n  createIt as createChapter,\n  updateIt as updateChapter,\n  deleteIt as deleteChapter\n} from '@/api/chapter_tmp'\nimport {\n  list as listVideo,\n  updateIt as updateVideo,\n  deleteIt as deleteVideo\n} from '@/api/video_tmp'\nimport { bytesToSize } from '@/utils'\n\nexport default {\n  name: 'CreateSubjectAndUpload',\n  components: {\n    'v-upload-video': () => import('@/views/course_update/upload')\n  },\n  // eslint-disable-next-line vue/require-prop-types\n  props: ['course'],\n  data() {\n    return {\n      chapters: [],\n      // 章节id与视频列表映射<chapterId,[...videos]>\n      chapterIdVideoMap: {},\n      addOrUpdateChapter: { title: '', sort: 0 },\n      updateVideoData: { title: '', sort: 0, free: false },\n      // 对话框\n      addChapterDialogVisible: false,\n      updateChapterDialogVisible: false,\n      deleteChapterDialogVisible: false,\n      tableRefreshIndex: 0,\n      // 上传视频\n      uploadVideoDialogVisible: false,\n      uploadVideoDialogTitle: '',\n      // 更新视频\n      updateVideoDialogVisible: false\n    }\n  },\n  created() {\n    this.getChapterList()\n  },\n  methods: {\n    // 字节转换\n    bytesToSize(bytes) {\n      return bytesToSize(bytes)\n    },\n    getChapterList() {\n      listChapter(this.course.id).then(resp => {\n        this.chapters = []\n        this.chapters = resp.data\n        // 初始化视频列表空数据\n        for (const c of resp.data) {\n          this.chapterIdVideoMap[c.id] = []\n        }\n      })\n    },\n    openAddChapterDialog() {\n      this.addOrUpdateChapter = { title: '', sort: 0 }\n      this.addChapterDialogVisible = true\n    },\n    openUpdateChapterDialog(curData) {\n      this.addOrUpdateChapter = { ...curData }\n      this.updateChapterDialogVisible = true\n    },\n    openDeleteChapterDialog(curData) {\n      this.addOrUpdateChapter = { ...curData }\n      this.deleteChapterDialogVisible = true\n    },\n    openUploadVideoDialog(curData) {\n      this.uploadVideoDialogTitle = `上传视频至章节[${curData.title}]`\n      this.uploadVideoDialogVisible = true\n      const data = { courseId: this.course.id, chapterId: curData.id }\n      setTimeout(function() {\n        this.$refs.UploadVideo.setData(data)\n      }.bind(this), 100)\n    },\n    openUpdateVideoDialogVisible(curData) {\n      this.updateVideoDialogVisible = true\n      this.updateVideoData = { ...curData }\n    },\n    // 新建章节\n    createChapter() {\n      this.addOrUpdateChapter.courseId = this.course.id\n      createChapter(this.addOrUpdateChapter).then(resp => {\n        this.$message.success(resp.message)\n        this.getChapterList()\n        this.addChapterDialogVisible = false\n      })\n    },\n    // 修改章节\n    updateChapter() {\n      this.addOrUpdateChapter.courseId = this.course.id\n      updateChapter(this.addOrUpdateChapter).then(resp => {\n        this.$message.success(resp.message)\n        this.getChapterList()\n        this.updateChapterDialogVisible = false\n      })\n    },\n    // 删除章节\n    deleteChapter() {\n      deleteChapter(this.addOrUpdateChapter.id).then(resp => {\n        this.$message.success(resp.message)\n        this.getChapterList()\n        this.deleteChapterDialogVisible = false\n      })\n    },\n    // 章节切换\n    change(id) {\n      // 获取章节视频信息\n      if (id) {\n        listVideo(id).then(resp => {\n          this.chapterIdVideoMap[id] = resp.data\n          ++this.tableRefreshIndex\n        })\n      }\n    },\n    // 上传对话框关闭时更新信息\n    uploadDialogBeforeClose(done) {\n      this.change(this.$refs.UploadVideo.data.chapterId)\n      done()\n    },\n    // 删除视频\n    deleteVideo(curData) {\n      deleteVideo(curData.id).then(resp => {\n        this.$message.success(resp.message)\n        this.change(curData.chapterId)\n      })\n    },\n    // 更新视频\n    updateVideo() {\n      updateVideo(this.updateVideoData).then(resp => {\n        this.$message.success(resp.message)\n        this.change(this.updateVideoData.chapterId)\n        this.updateVideoDialogVisible = false\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.chapter-head {\n  .sort{\n    width: 7%;\n    font-size: 15px;\n  }\n\n  .title {\n    width: 50%;\n    font-size: 15px;\n  }\n\n  .ctrl {\n    width: 43%;\n    text-align: right;\n\n    .el-button:last-child {\n      margin-right: 12px;\n    }\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}