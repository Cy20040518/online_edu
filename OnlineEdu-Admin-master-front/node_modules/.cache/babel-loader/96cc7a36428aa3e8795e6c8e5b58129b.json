{"remainingRequest":"C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\src\\permission.js","dependencies":[{"path":"C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\src\\permission.js","mtime":1646101641000},{"path":"C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\babel.config.js","mtime":1646101641000},{"path":"C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\86193\\Desktop\\OnlineEdu-Admin-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy84NjE5My9EZXNrdG9wL09ubGluZUVkdS1BZG1pbi1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvODYxOTMvRGVza3RvcC9PbmxpbmVFZHUtQWRtaW4tbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy84NjE5My9EZXNrdG9wL09ubGluZUVkdS1BZG1pbi1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvODYxOTMvRGVza3RvcC9PbmxpbmVFZHUtQWRtaW4tbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7IC8vIHByb2dyZXNzIGJhcgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsgLy8gcHJvZ3Jlc3MgYmFyIHN0eWxlCmltcG9ydCBnZXRQYWdlVGl0bGUgZnJvbSAnQC91dGlscy9nZXQtcGFnZS10aXRsZSc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOyAvLyBOUHJvZ3Jlc3MgQ29uZmlndXJhdGlvbgoKdmFyIHdoaXRlTGlzdCA9IFsnL2xvZ2luJ107IC8vIG5vIHJlZGlyZWN0IHdoaXRlbGlzdAoKcm91dGVyLmJlZm9yZUVhY2goLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgaXNMb2dpbjsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIC8vIHN0YXJ0IHByb2dyZXNzIGJhcgogICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgICAgICAgICAvLyBzZXQgcGFnZSB0aXRsZQogICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBnZXRQYWdlVGl0bGUodG8ubWV0YS50aXRsZSk7CgogICAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHVzZXIgaGFzIGxvZ2dlZCBpbgogICAgICAgICAgaXNMb2dpbiA9IE9iamVjdC5rZXlzKHN0b3JlLmdldHRlcnMudXNlcikubGVuZ3RoICE9PSAwOwogICAgICAgICAgaWYgKCFpc0xvZ2luKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICAgICAgICAvLyBpZiBpcyBsb2dnZWQgaW4sIHJlZGlyZWN0IHRvIHRoZSBob21lIHBhZ2UKICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgcGF0aDogJy8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g55Sf5oiQ5Y+v6K6/6Zeu55qE6Lev55Sx6KGoCiAgICAgICAgICAgIGlmIChzdG9yZS5nZXR0ZXJzLmFkZFJvdXRlcnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgZ2VuZXJhdGVSb3V0ZXMoKTsKICAgICAgICAgICAgICBuZXh0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG8pLCB7fSwgewogICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNzoKICAgICAgICAgIGlmICghKHdoaXRlTGlzdC5pbmRleE9mKHRvLnBhdGgpICE9PSAtMSkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGluIHRoZSBmcmVlIGxvZ2luIHdoaXRlbGlzdCwgZ28gZGlyZWN0bHkKICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZ2V0SW5mbycpOwogICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAvLyDnlJ/miJDlj6/orr/pl67nmoTot6/nlLHooagKICAgICAgICAgIGlmIChzdG9yZS5nZXR0ZXJzLmFkZFJvdXRlcnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGdlbmVyYXRlUm91dGVzKCk7CiAgICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE3OgogICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxMSk7CiAgICAgICAgICBNZXNzYWdlLmVycm9yKF9jb250ZXh0LnQwIHx8ICdIYXMgRXJyb3InKTsKICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgIGNhc2UgMjI6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMTEsIDE3XV0pOwogIH0pKTsKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICAvLyBmaW5pc2ggcHJvZ3Jlc3MgYmFyCiAgTlByb2dyZXNzLmRvbmUoKTsKfSk7CmZ1bmN0aW9uIGdlbmVyYXRlUm91dGVzKCkgewogIHZhciByb2xlcyA9IFtzdG9yZS5nZXR0ZXJzLnVzZXIucm9sZUlkXTsKICBzdG9yZS5kaXNwYXRjaCgnR2VuZXJhdGVSb3V0ZXMnLCB7CiAgICByb2xlczogcm9sZXMKICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIC8vIOWKqOaAgea3u+WKoOWPr+iuv+mXrui3r+eUseihqAogICAgcm91dGVyLm9wdGlvbnMucm91dGVzID0gc3RvcmUuZ2V0dGVycy5yb3V0ZXJzOwogICAgcm91dGVyLmFkZFJvdXRlcyhfdG9Db25zdW1hYmxlQXJyYXkoc3RvcmUuZ2V0dGVycy5hZGRSb3V0ZXJzKSk7CiAgfSk7CiAgLy8gaGFja+aWueazlSDnoa7kv51hZGRSb3V0ZXPlt7LlrozmiJAgLHNldCB0aGUgcmVwbGFjZTogdHJ1ZSBzbyB0aGUgbmF2aWdhdGlvbiB3aWxsIG5vdCBsZWF2ZSBhIGhpc3RvcnkgcmVjb3JkCiAgLy8gbmV4dCh7IC4uLnRvLCByZXBsYWNlOiB0cnVlIH0pCn0="},{"version":3,"names":["router","store","NProgress","getPageTitle","Message","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","from","next","isLogin","wrap","_callee$","_context","prev","start","document","title","meta","Object","keys","getters","user","length","path","done","addRouters","generateRoutes","_objectSpread","replace","indexOf","dispatch","t0","error","concat","stop","_x","_x2","_x3","apply","arguments","afterEach","roles","roleId","then","options","routes","routers","addRoutes","_toConsumableArray"],"sources":["C:/Users/86193/Desktop/OnlineEdu-Admin-master/src/permission.js"],"sourcesContent":["import router from '@/router'\nimport store from '@/store'\nimport NProgress from 'nprogress' // progress bar\nimport 'nprogress/nprogress.css' // progress bar style\nimport getPageTitle from '@/utils/get-page-title'\nimport { Message } from 'element-ui'\n\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\n\nconst whiteList = ['/login'] // no redirect whitelist\n\nrouter.beforeEach(async(to, from, next) => {\n  // start progress bar\n  NProgress.start()\n  // set page title\n  document.title = getPageTitle(to.meta.title)\n\n  // determine whether the user has logged in\n  const isLogin = Object.keys(store.getters.user).length !== 0\n  if (isLogin) {\n    if (to.path === '/login') {\n      // if is logged in, redirect to the home page\n      next({ path: '/' })\n      NProgress.done()\n    } else {\n      // 生成可访问的路由表\n      if (store.getters.addRouters.length === 0) {\n        generateRoutes()\n        next({ ...to, replace: true })\n      } else {\n        next()\n      }\n    }\n  } else {\n    if (whiteList.indexOf(to.path) !== -1) {\n      // in the free login whitelist, go directly\n      next()\n    } else {\n      // other pages that do not have permission to access are redirected to the login page.\n      try {\n        // logged in, get user info\n        await store.dispatch('user/getInfo')\n        // 生成可访问的路由表\n        if (store.getters.addRouters.length === 0) {\n          generateRoutes()\n          next({ ...to, replace: true })\n        } else {\n          next()\n        }\n      } catch (error) {\n        Message.error(error || 'Has Error')\n        next(`/login?redirect=${to.path}`)\n        NProgress.done()\n      }\n    }\n  }\n})\n\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done()\n})\n\nfunction generateRoutes() {\n  const roles = [store.getters.user.roleId]\n  store.dispatch('GenerateRoutes', { roles }).then(() => {\n    // 动态添加可访问路由表\n    router.options.routes = store.getters.routers\n    router.addRoutes([...store.getters.addRouters])\n  })\n  // hack方法 确保addRoutes已完成 ,set the replace: true so the navigation will not leave a history record\n  // next({ ...to, replace: true })\n}\n"],"mappings":"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","ignoreList":[]}]}